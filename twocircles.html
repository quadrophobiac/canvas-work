<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Two Circles in Orbit</title>
    <style>
        body{
            margin: 0px;
            padding: 0px;
        }
        #myCanvas {
            border: 1px #CCC solid;
            background-color: rgba(158, 167, 184, 0.2);
        }

        #staticCircle{
            color: rgb(0,153,255);
        }

        #movingOmmission{
            color: rgb(49, 255, 80);
        }

    </style>

</head>
<body>

<div id="container">
    <canvas id="myCanvas" width="600" height="300">

    </canvas>
</div>

<script>



    var time = new Date();
    var mainCanvas = document.getElementById("myCanvas");
    var mainContext = mainCanvas.getContext('2d');
//    mainContext.strokeStyle = 'lightgreen'; // circles to have same stroke stlye for now
    // this is an 'access API call'
    mainContext.scale(0.4,0.4);
    mainContext.rotate(-Math.PI/2);
    mainContext.setTransform(1, 0, 0, 1, 0, 0);
    mainContext.lineWidth = 5;
//    mainContext.globalCompositeOperation = 'destination-in';

    var orbits = new Array();

    var requestAnimationFrame = window.requestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.msRequestAnimationFrame;
    // above must be fallbacks dependant on which browser will be used

    function orbit() {

    }

    function Circle(xPos, startAngle, endAngle, color, speed){
        this.yPos = 150; // hardcoded because of canvas size
        this.width = 105; // hardcoded param
        this.counter = 0; // counter is an internal value that we can use to modulate other params
        this.startAngle = startAngle+0.05;
        this.endAngle = endAngle-0.05;
        this.xPos = xPos;
        this.color = color || 'lightgreen';
        this.speed = speed || 0.05;
    }

    Circle.prototype.draw = function(){
        // abstracting the canvas rendering methods into this function
        // can either pass speed as a param for this function, or include it as a property of each circle

//        if(speed){
////            console.log("speed param passed");
//        } else {
////            console.log("default increment speed being used");
//
//        }
//        var startAngle;
//        var endAngle;
        this.counter += this.speed;
        mainContext.strokeStyle = this.color;
        mainContext.beginPath();
        mainContext.arc(
                this.xPos,
                this.yPos,
                this.width,
                this.startAngle+this.counter,
                this.endAngle+this.counter,// end angle
                false
        );
//        mainContext.rotate(90);
        mainContext.stroke();
        mainContext.closePath();
    }

    function circleTest(){
        // will render a simple circle fitting the canvas with a chunk of its stroke missing
        mainContext.clearRect(0,0,600,300);
        mainContext.beginPath();
        mainContext.arc(
                150,
                150,
                105,
                Math.PI*0.00,// start angle = 3.141592653589793
                Math.PI*1.95,// end angle  = 6.283185307179586
                false
        );

        mainContext.stroke();
        mainContext.closePath();

    }
    createCircles();
//    circleTest();
//    draw();


    function createCircles(){
        var orbit1 = new Circle(150,Math.PI*1.5,Math.PI*1.5, 'rgb(49, 255, 80)', 0.05); // 12 o clock start
        var orbit2 = new Circle(400, Math.PI*1.45,Math.PI*1.5, 'rgb(0,153,255)',0.0005);
        orbits.push(orbit1, orbit2);
        console.log(orbits.length);
        console.log("Pi * 0.5= "+Math.PI*0.5+" Pi*1 = "+Math.PI*1.0+"+Math.PI*1.5 = "+Math.PI*1.4+" Math.PI*2.0 = "+Math.PI*2);
        draw();
    }

    function draw(){
        // function that calls itself, triggering animation
        mainContext.clearRect(0,0,600,300);
        // insert x axis movement loop here
//        for(each in all Circles){
//            each.Circle.draw();
//        }
        for(i = 0; i < orbits.length; i++){
            var theOrbit = orbits[i];
//            console.log(theOrbit);
            theOrbit.draw();
//            console.log(i);
        }
        requestAnimationFrame(draw);
        // accurate to the thousandth of millisecond
    }

    /* I want to draw an arc that creates the line outline of a circle
    * convention for this is that the params for arc:
    * start angle = 0
    * end angle = Math.PI*2 : however 360 also works
    * , to achieve effect of chunk missing from arc, you can do Math.PI*2
    * initial param can also be wrttien Math.PI*0,Math.PI*1.95
    * */


    /*
     2*Math.PI)/60000 ~

     12 o clock = PI*1.5 = 4.39822971502571
     3 o clock = Math.PI*2.0 = 6.283185307179586 || Math.PI
     6 o clock = Pi * 0.5 = 1.5707963267948966
     9 o clock Pi*1 = 3.141592653589793+Math.
    *
    * */

</script>

</body>
</html>